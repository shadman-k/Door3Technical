{"ast":null,"code":"var _jsxFileName = \"E:\\\\PracWebDev\\\\FinalProject\\\\frontend\\\\FinalProject-FrontEnd\\\\src\\\\components\\\\containers\\\\EditBookContainer.js\";\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport EditBookView from '../views/EditBookView';\nimport { editBookThunk, fetchBookThunk } from '../../store/thunks';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass EditBookContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleSubmit = async (event, sid) => {\n      event.preventDefault();\n      let editBook = {\n        title: this.state.title,\n        year: this.state.year,\n        authorId: this.state.authorId,\n        id: sid\n      };\n      await this.props.editBook(editBook);\n      this.setState({\n        title: \"\",\n        year: \"\",\n        email: \"\",\n        gpa: 0,\n        authorId: null,\n        redirect: true,\n        redirectId: sid\n      });\n    };\n\n    this.state = {\n      title: \"\",\n      year: \"\",\n      authorId: null,\n      redirect: false,\n      redirectId: null,\n      id: null\n    };\n  }\n\n  componentDidMount() {\n    this.props.fetchBook(window.location.pathname.slice(-1));\n    this.setState({\n      title: this.props.book.title,\n      year: this.props.book.year,\n      authorId: this.props.book.authorId,\n      redirect: false,\n      redirectId: null\n    });\n  }\n\n  componentWillUnmount() {\n    this.setState({\n      redirect: false,\n      redirectId: null\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: `/book/${this.state.redirectId}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 19\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(EditBookView, {\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      book: this.props.book\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nconst mapState = state => {\n  return {\n    book: state.book\n  };\n};\n\nconst mapDispatch = dispatch => {\n  return {\n    editBook: book => dispatch(editBookThunk(book)),\n    fetchBook: book => dispatch(fetchBookThunk(book))\n  };\n};\n\nexport default connect(mapState, mapDispatch)(EditBookContainer);","map":{"version":3,"sources":["E:/PracWebDev/FinalProject/frontend/FinalProject-FrontEnd/src/components/containers/EditBookContainer.js"],"names":["Component","connect","Redirect","EditBookView","editBookThunk","fetchBookThunk","EditBookContainer","constructor","props","handleChange","event","setState","target","name","value","handleSubmit","sid","preventDefault","editBook","title","state","year","authorId","id","email","gpa","redirect","redirectId","componentDidMount","fetchBook","window","location","pathname","slice","book","componentWillUnmount","render","mapState","mapDispatch","dispatch"],"mappings":"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","sourcesContent":["import { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport EditBookView from '../views/EditBookView';\r\nimport { editBookThunk, fetchBookThunk } from '../../store/thunks';\r\n\r\n\r\nclass EditBookContainer extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n          title: \"\", \r\n          year: \"\",\r\n          authorId: null, \r\n          redirect: false, \r\n          redirectId: null,\r\n          id: null,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n      this.props.fetchBook(window.location.pathname.slice(-1));\r\n\r\n      this.setState({\r\n        title: this.props.book.title,\r\n        year: this.props.book.year,\r\n        authorId: this.props.book.authorId,\r\n        redirect: false,\r\n        redirectId: null,\r\n      })\r\n    }\r\n\r\n    handleChange = (event) => {\r\n      this.setState({\r\n        [event.target.name]: event.target.value\r\n      });\r\n    }\r\n\r\n    handleSubmit = async (event, sid) => {\r\n        event.preventDefault();\r\n\r\n        let editBook = {\r\n            title: this.state.title,\r\n            year: this.state.year,\r\n            authorId: this.state.authorId,\r\n            id: sid,\r\n        };\r\n        \r\n        await this.props.editBook(editBook);\r\n\r\n        this.setState({\r\n          title: \"\", \r\n          year: \"\", \r\n          email: \"\",\r\n          gpa: 0,\r\n          authorId: null, \r\n          redirect: true, \r\n          redirectId: sid,\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.setState({redirect: false, redirectId: null});\r\n    }\r\n\r\n    render() {\r\n        if(this.state.redirect) {\r\n          return (<Redirect to={`/book/${this.state.redirectId}`}/>)\r\n        }\r\n        return (\r\n          <EditBookView \r\n            handleChange = {this.handleChange} \r\n            handleSubmit = {this.handleSubmit}\r\n            book = {this.props.book}    \r\n          />\r\n        );\r\n    }\r\n}\r\n\r\nconst mapState = (state) => {\r\n  return {\r\n    book: state.book,\r\n  };\r\n};\r\n\r\nconst mapDispatch = (dispatch) => {\r\n    return({\r\n        editBook: (book) => dispatch(editBookThunk(book)),\r\n        fetchBook: (book) => dispatch(fetchBookThunk(book)),\r\n    })\r\n}\r\n\r\nexport default connect(mapState, mapDispatch)(EditBookContainer);"]},"metadata":{},"sourceType":"module"}